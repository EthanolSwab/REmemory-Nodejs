paths:
  /pcapsule/create:
    post:
      tags:
        - Pcapsule
      summary: Create a new pcapsule
      parameters:
        - in: query
          name: userId
          required: true
          description: User Id
          schema:
            type: integer
            example: 1
        - name: create
          in: body
          required: true
          schema:
            type: object
            properties:
              pcapsule_name:
                type: string
                description: Name of the pcapsule
                example: "캡슐 1"
              open_date:
                type: string
                format: date
                description: Opening date of the pcapsule
                example: "2024-02-15"
              dear_name:
                type: string
                description: Name of the recipient
                example: "위트"
              theme:
                type: integer
                description: Theme of the pcapsule
                example: 1
              content_type:
                type: integer
                description: Type of content (1 for text/image, 2 for voice)
                example: 1
              contents:
                type: array
                items:
                  type: object
                  properties:
                    type:
                      type: string
                    content:
                      type: string
                example:
                  [
                    { type: "text", content: "안녕" },
                    { type: "image", content: "이미지 URL" },
                    { type: "image", content: "이미지 URL" },
                    { type: "text", content: "이 사진 기억나?" },
                  ]
              align_type:
                type: string
                enum: ["left", "center", "right"]
                description: Alignment type for the content
                example: "left"
      responses:
        "200":
          description: Pcapsule creation successful
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: integer
                    example: 200
                  isSuccess:
                    type: boolean
                    example: true
                  code:
                    type: integer
                    example: 2000
                  message:
                    type: string
                    example: "success!"
                  data:
                    type: object
                    example:
                      {
                        "pcapsule_name": "캡슐 1",
                        "open_date": "2024-02-15",
                        "dear_name": "위트",
                        "theme": 1,
                        "content_type": 1,
                        "contents":
                          [
                            { type: "text", content: "안녕" },
                            {
                              type: "image",
                              content: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMA…kakDsHxpPTEAbA/7800saP21M9FC5t1EGAAAAAElFTkSuQmCC",
                            },
                            {
                              type: "image",
                              content: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMA…kakDsHxpPTEAbA/7800saP21M9FC5t1EGAAAAAElFTkSuQmCC",
                            },
                            { type: "text", content: "이 사진 기억나?" },
                          ],
                        "align_type": "left",
                      }
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: integer
                    example: 400
                  isSuccess:
                    type: boolean
                    example: false
                  code:
                    type: integer
                    example: COMMON001
                  message:
                    type: string
                    example: "Bad Request"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: integer
                    example: 500
                  isSuccess:
                    type: boolean
                    example: false
                  code:
                    type: integer
                    example: COMMON000
                  message:
                    type: string
                    example: "Internal Server Error, please contact the administrator."
  /pcapsule/create/savePassword:
    post:
      tags:
        - Pcapsule
      summary: Save password for a pcapsule
      parameters:
        - name: savePassword
          in: body
          required: true
          schema:
            type: object
            properties:
              capsule_number:
                type: string
                description: Capsule number
                example: "leeyseo_17126"
              pcapsule_password:
                type: integer
                description: Password for the pcapsule
                example: 012345
      responses:
        "200":
          description: Password saved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: integer
                    example: 200
                  isSuccess:
                    type: boolean
                    example: true
                  code:
                    type: integer
                    example: 2000
                  message:
                    type: string
                    example: "success!"
                  data:
                    type: object
                    example:
                      {
                        "capsule_number": "WIT_1004",
                        "pcapsule_password": 012345,
                      }
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: integer
                    example: 400
                  isSuccess:
                    type: boolean
                    example: false
                  code:
                    type: integer
                    example: COMMON001
                  message:
                    type: string
                    example: "Bad Request"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: integer
                    example: 500
                  isSuccess:
                    type: boolean
                    example: false
                  code:
                    type: integer
                    example: COMMON000
                  message:
                    type: string
                    example: "Internal Server Error, please contact the administrator."

  /pcapsule/retrieve:
    get:
      tags:
        - Pcapsule
      summary: Retrieve pcapsule information
      parameters:
        - in: query
          name: capsule_number
          required: true
          description: Capsule number
          schema:
            type: string
            example: "leeyseo_17126"
        - in: query
          name: pcapsule_password
          required: true
          description: Password for the pcapsule
          schema:
            type: integer
            example: 012345
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    capsule_number:
                      type: string
                      example: "user123_2432432"
                    password:
                      type: string
                      example: "1568185"
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: integer
                    example: 400
                  isSuccess:
                    type: boolean
                    example: false
                  code:
                    type: string
                    example: "COMMON001"
                  message:
                    type: string
                    example: "Bad Request"
        "404":
          description: Not Found
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: integer
                    example: 404
                  isSuccess:
                    type: boolean
                    example: false
                  code:
                    type: string
                    example: "CAPSULE4001"
                  message:
                    type: string
                    example: "Bad Request"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: integer
                    example: 500
                  isSuccess:
                    type: boolean
                    example: false
                  code:
                    type: string
                    example: "COMMON000"
                  message:
                    type: string
                    example: "Internal Server Error, please contact the administrator."
      examples:
        success:
          value:
            - capsule_number: "user123_2432432"
              password: "1568185"
            - capsule_number: "user123_2432433"
              password: "9876543"
        error:
          value:
            status: 400
            isSuccess: false
            code: "COMMON001"
            message: "Bad Request"
  /pcapsule/retrieveDetail:
    get:
      tags:
        - Pcapsule
      summary: Retrieve detailed pcapsule information
      parameters:
        - in: query
          name: capsule_number
          required: true
          description: Capsule number
          schema:
            type: string
            example: "leeyseo_17126"
        - in: query
          name: pcapsule_password
          required: true
          description: Password for the pcapsule
          schema:
            type: integer
            example: 12345
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    capsule_name:
                      type: string
                      example: "user123_2432432"
                    password:
                      type: string
                      example: "1568185"
                    capsules:
                      type: array
                      items:
                        type: object
                        properties:
                          capsule_number:
                            type: string
                            example: "user123_2432432"
                          pcapsule_name:
                            type: string
                            example: "캡슐 1"
                          open_date:
                            type: string
                            format: date
                            example: "2025-01-01"
                          dear_name:
                            type: string
                            example: "위트"
                          theme:
                            type: string
                            example: "1"
                          content_type:
                            type: string
                            example: "1"
                          body:
                            type: string
                            example: "너랑 함께해서 어쩌고저쩌고"
                          text_image_id:
                            type: string
                            example: "123456"
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: integer
                    example: 400
                  isSuccess:
                    type: boolean
                    example: false
                  code:
                    type: integer
                    example: COMMON001
                  message:
                    type: string
                    example: "Bad Request"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: integer
                    example: 500
                  isSuccess:
                    type: boolean
                    example: false
                  code:
                    type: integer
                    example: COMMON000
                  message:
                    type: string
                    example: "Internal Server Error, please contact the administrator."
      examples:
        success:
          value:
            - capsule_name: "user123_2432432"
              password: "1568185"
              capsules:
                - capsule_number: "user123_2432432"
                  pcapsule_name: "캡슐 1"
                  open_date: "2025-01-01"
                  dear_name: "위트"
                  theme: "1"
                  content_type: "1"
                  body: "너랑 함께해서 어쩌고저쩌고"
                  text_image_id: "123456"
        error:
          value:
            status: 400
            isSuccess: false
            code: COMMON001
            message: "Bad Request"
  /pcapsule/delete/{capsuleid}:
    patch:
      tags:
        - Pcapsule
      summary: Delete a pcapsule by ID
      parameters:
        - name: capsuleid
          in: path
          required: true
          description: ID of the pcapsule to delete
          schema:
            type: string
            example: "leeyseo_17126"
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    user_id:
                      type: string
                      example: "user_123"
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: integer
                    example: 400
                  isSuccess:
                    type: boolean
                    example: false
                  code:
                    type: integer
                    example: COMMON001
                  message:
                    type: string
                    example: "Bad Request"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: integer
                    example: 500
                  isSuccess:
                    type: boolean
                    example: false
                  code:
                    type: integer
                    example: COMMON000
                  message:
                    type: string
                    example: "Internal Server Error, please contact the administrator."
      examples:
        success:
          value:
            - user_id: "user_123"
        error:
          value:
            status: 400
            isSuccess: false
            code: COMMON001
            message: "Bad Request"

  # Rcapsule Part

  # [POST] rcapsule 생성 api
  /rcapsule/create:
    post:
      tags:
        - Rcapsule
      summary: "롤링페이퍼 생성"
      parameters:
        - in: query
          name: userId
          description: 스웨거 테스트용 user ID 입력칸
          schema:
            type: int
            example: 1
        - in: body
          name: create
          required: true
          schema:
            type: object
            properties:
              rcapsule_name:
                type: string
                description: rcapsule 이름
                example: "롤링페이퍼 캡슐 1"
              open_date:
                type: string
                description: rcapsule 여는 날짜
                format: date
                example: "2024-02-29"
              dear_name:
                type: string
                description: 받는 사람 이름
                example: "김고은"
      responses:
        "200":
          description: Rcapsule 작성 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: integer
                    example: 200
                  isSuccess:
                    type: boolean
                    example: true
                  code:
                    type: integer
                    example: 2000
                  message:
                    type: string
                    example: "success!"
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: integer
                    example: 400
                  isSuccess:
                    type: boolean
                    example: false
                  code:
                    type: integer
                    example: COMMON001
                  message:
                    type: string
                    example: "Bad Request"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                type: object
                properties:
                  status: integer
                  example: 500
                isSuccess:
                  type: boolean
                  example: false
                code:
                  type: integer
                  example: COMMON000
                message:
                  type: string
                  example: "Internal Server Error. 관리자에게 문의하세요."

  /rcapsule/{rcapsule_id}:
    patch:
      tags:
        - Rcapsule
      summary: 롤링페이퍼 비밀번호 설정하기
      parameters:
        - in: path
          name: rcapsule_id
          required: true
          description: 비밀번호를 설정할 캡슐의 고유번호
          schema:
            type: string
            example: "WIT_202450"
        - in: body
          name: password
          required: true
          schema:
            type: object
            properties:
              rcapsule_password:
                type: string
                description: rcapsule 비밀번호(ex. 숫자 6글자)
                example: "298304"
      responses:
        "200":
          description: 비밀번호 설정 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: integer
                    example: 200
                  isSuccess:
                    type: boolean
                    example: true
                  code:
                    type: integer
                    example: 2000
                  message:
                    type: string
                    example: "success!"
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: integer
                    example: 400
                  isSuccess:
                    type: boolean
                    example: false
                  code:
                    type: integer
                    example: COMMON001
                  message:
                    type: string
                    example: "Bad Request"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: integer
                    example: 500
                  isSuccess:
                    type: boolean
                    example: false
                  code:
                    type: integer
                    example: COMMON000
                  message:
                    type: string
                    example: "Internal Server Error. 관리자에게 문의하세요."

  # [POST] 롤링페이퍼 음성 메세지 추가
  /rcapsule/voice/{rcapsule_number}:
    post:
      tags:
        - Rcapsule
      summary: "롤링페이퍼에 음성 메세지 쓰기"
      consumes:
        - multipart/form-data
      parameters:
        - in: formData
          name: voice_rcapsule
          required: true
          type: file
          description: file to upload
        - in: path
          name: rcapsule_number
          required: true
          description: 음성 메세지를 쓰고 싶은 롤링페이퍼 고유번호
          schema:
            type: string
            example: "TEST_111111"
        - in: query
          name: from_name
          required: true
          description: 작성한 사람
          schema:
            type: string
            example: "nahy"
        - in: query
          name: content_type
          required: true
          schema:
            type: string
            example: "2"
        - in: query
          name: theme
          required: true
          schema:
            type: string
            example: "1"
      responses:
        "200":
          description: 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: integer
                    example: 200
                  isSuccess:
                    type: boolean
                    example: true
                  code:
                    type: integer
                    example: 2000
                  message:
                    type: string
                    example: "success!"
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: integer
                    example: 400
                  isSuccess:
                    type: boolean
                    example: false
                  code:
                    type: integer
                    example: COMMON001
                  message:
                    type: string
                    example: "Bad Request"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: integer
                    example: 500
                  isSuccess:
                    type: boolean
                    example: false
                  code:
                    type: integer
                    example: COMMON000
                  message:
                    type: string
                    example: "Internal Server Error. 관리자에게 문의하세요."

  # User
  /user/auth:
    get:
      tags:
        - User
      summary: "카카오 회원가입/로그인"
      parameters:
        - in: query
          name: code
          description: 카카오 인가 코드
          schema:
            type: string
      responses:
        "200":
          description: User 로그인/회원가입 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  isSuccess:
                    type: boolean
                    example: true
                  code:
                    type: string
                    example: "USER002"
                  message:
                    type: string
                    example: "회원가입에 성공했습니다. 닉네임을 설정해주세요."
  /user:
    patch:
      tags:
        - User
      summary: "회원가입 후 닉네임 설정"
      parameters:
        - in: body
          name: 닉네임 설정
          required: true
          schema:
            type: object
            properties:
              userId:
                type: int
                example: 2
              email:
                type: string
                example: ateahyun@naver.com
              nickname:
                type: string
                example: "티티"
      responses:
        "200":
          description: 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: integer
                    example: 200
                  isSuccess:
                    type: boolean
                    example: true
                  code:
                    type: integer
                    example: 2000
                  message:
                    type: string
                    example: "success!"
  /user/nickname:
    patch:
      tags:
        - User
      summary: "기존유저 닉네임 설정"
      parameters:
        - in: body
          name: 닉네임 설정
          required: true
          schema:
            type: object
            properties:
              userId:
                type: int
                example: 2
              nickname:
                type: string
                example: "티티티"
      responses:
        "200":
          description: 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: integer
                    example: 200
                  isSuccess:
                    type: boolean
                    example: true
                  code:
                    type: integer
                    example: 2000
                  message:
                    type: string
                    example: "success!"
  /user/{userId}:
    get:
      tags:
        - User
      summary: 유저 정보 불러오기
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: int
            example: 1
      responses:
        "200":
          description: 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: integer
                    example: 200
                  isSuccess:
                    type: boolean
                    example: true
                  code:
                    type: integer
                    example: 2000
                  message:
                    type: string
                    example: "success!"
  /user/deactivate:
    patch:
      tags:
        - User
      summary: "계정 비활성화"
      parameters:
        - in: body
          name: 계정 비활성화
          required: true
          schema:
            type: object
            properties:
              userId:
                type: int
                example: 1
      responses:
        "200":
          description: 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: integer
                    example: 200
                  isSuccess:
                    type: boolean
                    example: true
                  code:
                    type: integer
                    example: 2000
                  message:
                    type: string
                    example: "success!"
